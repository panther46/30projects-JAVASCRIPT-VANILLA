<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel=StyleSheet HREF="styles.css" type="text/css" media=screen>
    <title>Document</title>
</head>
<body>
    <div class = "keys">
        <div data-key = "65" class="key">
            <kbd>A</kbd>
            <span class= "sound">Clap</span>
        </div>
        <div data-key = "83" class = "key">
            <kbd>S</kbd>
            <span class = "sound" class = "key">Hihat</span>
        </div>
        <div data-key = "68" class = "key">
            <kbd>D</kbd>
            <span class = "sound">Kick</span>
        </div>
        <div data-key = "70" class = "key">
            <kbd>F</kbd>
            <span class = "sound">Openhat</span>
        </div>
        <div data-key = "71" class = "key">
            <kbd>G</kbd>
            <span class = "sound">Boom</span>
        </div>
        <div data-key = "72" class = "key">
            <kbd>H</kbd>
            <span class = "sound">Ride</span>
        </div>
        <div data-key = "74" class = "key">
            <kdb>J</kdb>
            <span class = "sound">Snare</span>
        </div>
        <div data-key = "75" class = "key">
            <kdb>K</kdb>
            <span class = "sound">Tom</span>
        </div>
        <div data-key = "76" class = "key">
            <kbd>L</kbd>
            <span class = "sound">Tink</span>
        </div>
        
    </div>

<!-- Mapping the sounds with data-key attribute anchorage -->
    <audio data-key = "65" src = "sounds/clap.wav"></audio>
    <audio data-key = "83" src= "sounds/hihat.wav"></audio>
    <audio data-key = "68" src = "sounds/kick.wav"></audio>
    <audio data-key = "70" src = "sounds/openhwat.wav"></audio>
    <audio data-key = "71" src = "sounds/boom.wav"></audio>
    <audio data-key = "72" src = "sounds/ride.wav"></audio>
    <audio data-key = "74" src = "sounds/snare.wav"></audio>
    <audio data-key = "75" src = "sounds/tom.wav"></audio>
    <audio data-key = "76" src = "sounds/tink.wav"></audio>


<script>
    // Adding custom event with two parameters: the event and the function getting the event.
    window.addEventListener('keydown', function(e){
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);  //we select with querySelector from the dom and we get dinamically the keycode from each event.
        const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
        
        if(!audio) return; // If there is no audio, the function ends here
        audio.currentTime = 0; // rewind the audio before start one new.
        audio.play();
        key.classList.add('playing');
    });



    function removeTransition (e){
        
        if(e.propertyName != "transform") return; // Filtering only the property name that we need to avoid multiples logs of each class.
        console.log(e.propertyName);
        this.classList.remove('playing');
    }

    const keys = document.querySelectorAll('.key');
     keys.forEach(key => key.addEventListener('transitionend', removeTransition)); // we need to run into each key inside the arrway, thats the wy of forEach.

</script>

</body>
</html>

